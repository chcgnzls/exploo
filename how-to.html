<!DOCTYPE HTML>
<meta charset="utf-8">
<title>How to use this site</title>
<link rel="stylesheet" type="text/css" href="styles/how-to.css"> 
<link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Playfair+Display|Raleway|Old+Standard+TT|Open+Sans|Crimson+Text" rel="stylesheet">
<body>
	<div id="title">
		<h1>How to use this site:</h1>
	</div>
	<div id="content">
		<div class="par">
			This page explains how to navigate and use the features of the Exploring
			Opportunity site that visualized the Equality of Opportunity data from
			the Chetty et al. (2014) study identifying the causal effects of 
			geography on social mobility. 
		</div>
		<div class="par">
			This site was developed and tested using Chromium Browser (Google 
			Chrome). If something looks or acts a bit off, it might be because of your browser.
		</div>
		<div>
			<h3>Jump to:</h3>
			<ul class="nav">
				<li class="nav">
					<a href="#vars">Variable Definitions</a>
				</li>
				<li class="nav">
					<a href="#nav">Navigation</a>
					<ul>
						<li class="nav"><a href="#zoom">Zoom</a></li>
					</ul>
				</li>
				<li class="nav"><a href="#data">Using your own data</a></li>
				<li class="nav"><a href="#api">Using the U.S. Census Bureau&rsquo;s API</a></li>
				<li class="nav"><a href="#reg">Regression table</a></li>
				<li class="nav"><a href="#plot">Plotting</a></li>
			</ul>
		</div>
		<h2 id="vars">Variable Definitions</h2>
		<div class="par">
			There are a lot of variables and abbreviations. Here&rsquo;s the
			<a href="http://www.equality-of-opportunity.org/data/neighborhoods/online_table4.pdf" target="_blank">documentation</a> with all the definitions and the naming scheme.	
		</div>
		<h2 id="nav">Navigation:</h2>
		<div class="par">
			Each of the option side-bars can be closed and opened 
			by clicking on the light gray bars like the one below:
		</div>
		<div class="bar"></div> 
		<h3 id="zoom">Zoom:</h3>
		<div class="par">
			Click to zoom and center on a geographic-level. To get a closer look, 
			click on a smaller region; the map scales proportionally to its area.
			You can recenter the map by clicking the same location twice or by 
			clicking on the background of the map.
		</div>
		<h2 id="data">Using your own data:</h2>
		<div class="par">
			This site allows you upload and merge data to the EO dataset. 
			These files will not be saved. To prevent data loss, I suggest 
			saving all of you data 
			(at the very least the geographic identifiers) that you intend to use 
			as UTF-8 encoded character strings before attempting to load it. 
		</div>
		<div class="par">
			Variable names in you dataset and the EO dataset can&rsquo;t be the same,
			or the EO data will be overwritten.
		</div>
		<div class="par note" id="null">
			<h4>Note on <span class="mono">null</span> types:</h4>
			Variables should not be stored as <span class="mono">null</span> 
			unless you expect them to be treated as zeros or if they are stored as a 
			character string and you expect them to treated as missing values. 
			Variables in this form have not been rigorously tested; you may 
			risk data loss and failed or incorrect merges.
		</div>
		<ol>
			<li>
				<div class="par">
					Click the light gray bar at the top of the page, above 
					the map&mdash;a dropdown box will open.	
					<br/>
					<img src="styles/imgs/use-data.png" style="width:370px">
				</div>
			</li>
			<li>
				<div class="par">
					Click <div class="bttn">Choose a <span class="mono">.csv</span></div>
					A dialog box will open. Choose the file you want upload. 
				</div>
			</li>
			<li>
				<div class="par">
					Once the file is successfully opened, the rest of the menu 
					will be become active. Click the dropdown box above the Information
					box. Choose the variable in your dataset that will match to the EO 
					dataset based on geographic location. 
					This geographic identifier must be a concatenation of the 2000 
					two-digit state FIPS and three-digit county FIPS codes with 
					leading zeros. 
					For more information on FIPS codes see the <a href="https://usa.ipums.org/usa-action/variables/COUNTYFIPS#description_section" target="_blank">IPUMS description</a>.
				</div>
				<div class="par">
					If you are loading data with missing geographic identifirs, they 
					should be stored as <span class="mono">NA</span> or 
					<span class="mono">NaN</span> (see <a href="#null">note</a> on 
					<span class="mono">null</span> values).
				</div>
			</li>
			<li>
				<div class="par">
					Once your data is uploaded, you will see information about the 
					success of the merge.	
				</div>	
				<div class="par">
					There are two  ways for your merge to partially
					or completely fail: your data contains geographic identifiers not 
					found in the EO data or vice versa.	
				</div>
				<div class="par">
					If the merge partially (or completely) failed, you can download a 
					<span class="mono">.json</span> file that contains the unmatched 
					observations from your dataset and some information about the 
					unmatched observations from the EO dataset. A generalized example 
					of the file structure is below:
<div class="code">
	{<br/>
	unmatched_cli:<br/>
	&emsp;[{var1: observation1, var2: observation1, ..., varK: observation1},<br/>
	&emsp;{var1: observation2, var2: observation2, ..., varK: observation2},<br/>
	&emsp;...,<br/>
	&emsp;{var1: observationN, var2: observationN, ..., varK: observationN}],<br/>
	unmatched_serv:<br/>
	&emsp;[{GEOID: observation1, ST: observation1, COUNTY: observation1},<br/>
	&emsp;{GEOID: observation2, ST: observation2, COUNTY: observation2},<br/>
	&emsp;...,<br/>
	&emsp;{GEOID: observationN, ST: observationN, COUNTY: observationN}]<br/>
	}
</div> 
				</div>
			</li>
			<li>
				<div class="par">
					If your merge was partially (or completely) successful, 
					you&rsquo;ll be able to export the data as a 
					<span class="mono">.csv</span>
				</div>
			</li>
		</ol>
		<div class="par">
			You will now be able to use any of the mapping, plotting, regression 
			table, and monotonic transformation features on your data.	
		</div>
		<div class="par">
			Multiple datasets can be opened and merged as long as they don&rsquo;t 
			have the same variable names of those in the EO data or your previously 
			loaded files.
		</div>
		<h2 id="api">Using the U.S. Census Bureau&rsquo;s API:</h2>
		<div class="par">
			If there&rsquo; some additional demographic or economic data maintained 
			by the U.S. Census Bureau, you can add it using their <a href="api.census.org" target="_blank">API</a>.
			You aren&rsquo;t already familiar with the API, you may want to take a 
			look at the <a href="api.census.gov/documentation" target="_blank">documentation</a> for the various data sets.
		</div>
		<div class="par">
			Depending on the dataset or years you select, this site will merge state
			or county level data. You can add multipule years/sources and export the
			merged data to a <span class="mono">.csv</span> file.	
		</div>
		<ol>
			<li><div class="par">
				Click the light gray bar at the top of the page, above 
				the map&mdash;a dropdown box will open.	
				<br/>
				<img src="styles/imgs/use-data.png" style="width:370px">
			</div></li>
			<li><div class="par">
				ipsum
			</div></li>
		</ol>
		<h2 id="reg">Regression Table:</h2>
		<div class="par">
			You can run an multi-variate Ordinary Least-Squares regression using the
			EO dataset or any data you may have uploaded.
		</div>
		<ol>
			<li>
				<div class="par">
					Click the light gray box next to the left of the plot; a box will 
					open with options for a regression specification.
					<br/>
					<img src="styles/imgs/show-reg.png" style="height:150px;width:300px">
				</div>
			</li>
			<li>
				<div class="par">
					Select an outcome as the left-hand-side variable of the
					regression you&rsquo;d like to run and select any number of 
					right-hand-side variables from the available covariates.
				</div>
				<div class="par">
					If you successfully uploaded any data you should see those variables 
					at the top of each list.
				</div>
			</li>
			<li>
				<div class="par">
					Click <div class="bttn">Run!</div> and a table of regression 
					coefficients, standard errors, number of observations, R&sup2;, and 
					F-test will load to the right of plot if your specification 
					wasn&rsquo;t malformed.
				</div>
		</ol>
		<div class="par note">
			<h4>Note on p-values:</h4>
			P-values and stars are not currently supported. You&rsquo;ll have to 
			pay close attention to the value of the coefficient and the size of 
			the standard error.	
		</div>
		<h2 id="plot">Plotting:</h2>
		<div class="par">
			This site a scatter plot feature. As default, the dependant variable is
			grouped into 64 bins. The mean value of the dependant and independent 
			variable is plotted. The size of each point represents the relative
			number of observations in each bin.	
		</div>
		<ol>
			<li>
				<div class="par">
					To open the plotting options window, click the light gray box to the
					right of the regression table.
					<br/>
					<img src="styles/imgs/show-plot.png">
				</div>
			</li>
			<li>
				<div class="par">
					Select the independent (y-axis) and dependent (x-axis) variables and
					a monotonic transformation when appropriate.
				</div>
				<div class="par">
					It should plot immediately. Wow! One less click than the 
					regression table.
				</div>
			</li>
			<li>
				<div class="par">
					You can fit the data to a linear or quadratic functional form using
					the Fit Trend option.
				</div>
			</li>
			<li>
				<div class="par">
					You can choose any number of bins between 2 and the number of 
					observations. Any choice outside this range will load a traditional
					(unbinned) scatter plot. 
				</div>
			</li>
		</ol>
	</div>
</body>
