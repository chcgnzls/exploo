<!DOCTYPE html>
<meta charset="utf-8">
<style>
	.triangle {
		fill: #f00;
		stroke: #000;
		stroke-width: 0.5;
	}
	
	.triangle:hover {
		opacity: .5;
		transition: opacity .5s;
	}
</style>
<svg></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var nVertex = 9;
var sizeLeg = 20;

var width = 200,
		height = 200;

var vertexes = []

for (var i = 0; i < Math.floor(Math.sqrt(nVertex)); i++) {
	for (var j = 1; j <= Math.floor(Math.sqrt(nVertex)); j++) {
		vertexes.push({x: i*sizeLeg, y: j*sizeLeg});
	}
}

var tex = [d3.range(4).map(function(d) {return [Math.floor(Math.random() * 5), d * Math.floor(Math.random()*5+40)]})];

for (var i = 0; i < 4; i++) {
	tex.push(tex[i].map(function(d) { return [d[0] + Math.floor(Math.random()*7+40), d[1] + Math.floor(Math.random() * 10)] }))
} 

pex = []
for (var i = 0; i < tex[0].length - 1; i++) {
	for (var j = 0; j < tex.length - 1; j++) {
		pex.push([tex[j][i+1], tex[j][i], tex[j+1][i]])
	}
}
console.log(pex);
console.log(tex);
var svg = d3.select("svg").attr("width", width).attr("height", height);

svg.selectAll("d").data(pex).enter().append("path").attr("d", function(d) {
	return "M " + d[0][0] + " " + d[0][1] + " L " + d[1][0] + " " + d[1][1]
		+ " " + d[2][0] + " " + d[2][1] + " Z"; })
	.attr("class", "triangle");
/*
svg.selectAll("d").data(vertexes).enter().append("path")
	.attr("d", function(d)
		{ return "M " + d.x + " " + d.y + " L " + d.x + " " + (d.y - sizeLeg) 
			+ " " + (d.x + sizeLeg) + " " + (d.y - sizeLeg) + " Z"; })
	.attr("class", "triangle");
*/
</script>
