<!DOCTYPE html>
<meta charset="utf-8">
<title>USA</title>
<style>
	.land {
		fill: #ddd;
	}

	.border {
		fill: none;
		stroke: #fff;
		stroke-linejoin: round;
		stroke-linecap: round;
	}

	.land :hover {
		fill-opacity: .6;
		stroke: #fff;
		stroke-linejoin: round;
		stroke-linecap: round;
	}

	div.tooltip {
		position: absolute;
		text-align: left;
		padding: 4px;
		background: #fff;
		border: 0px;
		pointer-events: none;
	}

</style> 
<body>
	<div id="tooltip"></div>
	<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>
	<script>
		var width = 960;
		var height = 600;
		var scale = 1280;
		var path = d3.geo.path().projection(null);
		
		var svg = d3.select("body").append("svg").attr("width", width)
						.attr("height", height); 

		var tooltip = d3.select("section").append("div").attr("class", "tooltip")
			.style("opacity", 0);

		function mouseover() {
			tooltip.transition().duration(200).style("opacity", .9);
		}
		function mousemove(d) {
			tooltip.html(d.properties.outcome
		d3.json("/usa-sm-q.json", function(error, usa) {
			if (error) throw console.log(error);
			
			cty = topojson.feature(usa, usa.objects.cty).features;
			var max_outcome = d3.max(cty, function(d) { 
				return Number(d.properties.outcome) });	
			var med_outcome = d3.median(cty, function(d) {
				return Number(d.properties.outcome) });
			var min_outcome = d3.min(cty, function(d) { 
				return Number(d.properties.outcome) });	

			var color = d3.scale.linear().domain([min_outcome,0,max_outcome])
				.range(["#ef8a62", "#f7f7f7", "#67a9cf"]);

			svg.append("g").attr("class", "land").selectAll("path")
				.data(topojson.feature(usa, usa.objects.cty).features)
				.enter().append("path")
					.attr("fill", function(d) { return color(d.properties.outcome); })
				.attr("d", path);
	
			svg.append("path").attr("class", "border").on("mouseover", mouseover)
				.on("mousemove", mousemove).on("mouseout" mouseout);
			});
	</script>
</body>
