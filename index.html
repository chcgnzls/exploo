<!DOCTYPE html>
<meta charset="utf-8">
<title>USA</title>
<style>
	.land {
		fill: #ddd;
	}

	.border {
		fill: none;
		stroke: #fff;
		stroke-linejoin: round;
		stroke-linecap: round;
	}

	.land :hover {
		fill-opacity: .7;
	}
</style> 
<body>
	<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	<script>
		var width = 960;
		var height = 600;
		var scale = 1280;
		var path = d3.geo.path().projection(null);
		
		var svg = d3.select("body").append("svg").attr("width", width)
						.attr("height", height); 

		d3.json("/usa-sm-q.json", function(error, usa) {
			if (error) throw console.log(error);
			
			cty = topojson.feature(usa, usa.objects.cty).features;
			var max_out = d3.max(cty, function(d) { return d.properties.outcome });	
			var min_out = d3.min(cty, function(d) { return d.properties.outcome });	
			max_out=5
			min_out=-5
			var color = d3.scale.linear().domain([min_out, max_out]).range(["orange","blue"]);

			svg.append("g").attr("class", "land").selectAll("path")
				.data(topojson.feature(usa, usa.objects.cty).features)
				.enter().append("path")
					.attr("fill", function(d) { return color(d.properties.outcome); })
				.attr("d", path);
	
			svg.append("path").attr("class", "border");
			});
	</script>
</body>

